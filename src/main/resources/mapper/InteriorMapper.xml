<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/schema/mybatis-3-mapper.dtd">

<mapper namespace="com.hanssem.app.dao.InteriorMapper">

    <resultMap id="InteriorMain" type="InteriorDto">
        <result column="interior_number" property="interior_number"/>
        <result column="interior_name" property="interior_number"/>
        <result column="interior_content" property="interior_content"/>
        <result column="interior_register_date" property="interior_register_date"/>
        <result column="interior_image_path" property="interior_image_path"/>
        <collection property="productDto" resultMap="ProductDto"/>
    </resultMap>


    <select id="selectInterior" resultMap="InteriorMain" parameterType="int">
        SELECT * from
    </select>

    <!--    상품 이미지 등록-->
    <insert id="insert" parameterType="ImageDto">
        INSERT INTO image
        (image_path, image_file_name, image_rename_file_name, image_code_number, product_number,)
        VALUES
        (#{image_path},#{image_file_name},#{image_rename_file_name},#{image_code_number},#{product_number})
    </insert>

    <!--    상품에 맞는 이미지경로 불러오기-->
    <select id="selectImg" parameterType="int" resultType="ImageDto">
        SELECT * FROM image WHERE product_number = #{product_number}
    </select>

    <!--    상품에 맞는 상세이미지 경로 불러오기-->
    <select id="selectImgDetail" parameterType="int" resultType="ImageDto">
        SELECT * FROM image
        WHERE product_number = #{product_number} and image_code_number = 2
    </select>
    <!--    상품에 맞는 이미지경로와 이미지에 맞는 색상 이름 불러오기    -->
    <select id="selectImgColor" resultMap="ImageColorDto">
        SELECT color_code_name,
        color_code_code,
        image_path,
        product_number
        FROM image_color
        JOIN color_code cc on image_color.color_code_number = cc.color_code_number
        JOIN image i on image_color.image_number = i.image_number
        WHERE product_number = #{product_number}
    </select>


</mapper>